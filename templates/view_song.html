{% extends "base.html" %}

{% block title %}{{ song.title }} - FlowState{% endblock %}

{% block content %}
<!-- Back to Dashboard Button -->
<div class="mb-6">
    <a href="{{ url_for('index') }}" 
       class="inline-flex items-center gap-2 px-4 py-2 rounded-lg
              bg-white/5 hover:bg-white/10 backdrop-blur-sm
              border border-white/10 hover:border-purple-500/50
              text-white/70 hover:text-white transition-all duration-300">
              <!-- Left Arrow Icon -->
        <svg class="w-5 h-5 transform group-hover:-translate-x-1 transition-transform duration-300" 
             fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M15 19l-7-7 7-7"/>
        </svg>
        <span>Back to Dashboard</span>
    </a>
</div>

<!-- Song Header Section -->
<div class="glass-card p-8 mb-8 animate-fade-in">
    <!-- Song Title with Gradient -->
    <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 
               bg-clip-text text-transparent">
        {{ song.title }}
    </h1>

    <!-- Status Badge and Date -->
    <div class="flex items-center gap-4 flex-wrap">
        <!-- Status Badge -->
        <span class="px-4 py-2 rounded-full text-sm font-semibold
                     {% if song.status == 'draft' %}
                         bg-yellow-500/20 text-yellow-300 border border-yellow-500/30
                         {% elif song.status == 'recording' %}
                         bg-green-500/20 text-green-300 border border-green-500/30
                     {% elif song.status == 'complete' %}
                         bg-blue-500/20 text-blue-300 border border-blue-500/30
                     {% endif %}">
            {{ song.status|capitalize }}
        </span>

        <!-- Date Created -->
        <span class="text-white/50 text-sm">
            Created: {{ song.date_created.strftime('%B %d, %Y') }}
        </span>
    </div>
    </div>

<!-- Lyrics Section -->
<div class="glass-card p-8 mb-8 animate-fade-in-up">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-white flex items-center gap-3">
            <!-- Mic Icon -->
            <svg class="w-7 h-7 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
            </svg>
            Lyrics
            </h2>

        <!-- Add Lyrics Button -->
        <a href="{{ url_for('add_lyrics', song_id=song.id) }}"
           class="inline-flex items-center gap-2 px-5 py-2.5 rounded-lg
                  bg-gradient-to-r from-purple-600 to-cyan-600
                  hover:from-purple-500 hover:to-cyan-500
                  text-white font-semibold shadow-lg shadow-purple-500/50
                  hover:shadow-purple-500/70 hover:scale-105
                  transition-all duration-300">
            <!-- Plus Icon -->
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M12 4v16m8-8H4"/>
            </svg>
            Add Lyrics
        </a>
    </div>

    <!-- Lyrics Display or Empty State -->
    {% if lyrics %}
        <!-- Display all verses -->
        <div class="space-y-6">
            {% for lyric in lyrics %}
                <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-6
                hover:bg-white/10 hover:border-purple-500/30
                     transition-all duration-300">
                    <!-- Verse Header -->
<div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold text-purple-400">
        Verse {{ lyric.verse_number }}
    </h3>
    
    <div class="flex items-center gap-3">
        <!-- Edit Button -->
        <a href="{{ url_for('edit_lyrics', song_id=song.id, lyrics_id=lyric.id) }}"
           class="inline-flex items-center gap-1 px-3 py-1.5 rounded-lg
                  bg-cyan-500/20 hover:bg-cyan-500/30
                  border border-cyan-500/50 hover:border-cyan-500
                  text-cyan-300 hover:text-cyan-200 text-sm font-semibold
                  hover:shadow-lg hover:shadow-cyan-500/50
                  transition-all duration-300">
            <!-- Edit Icon -->
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
            </svg>
            Edit
        </a>

    <!-- Delete Button -->
        <form method="POST" 
              action="{{ url_for('delete_lyrics', song_id=song.id, lyrics_id=lyric.id) }}" 
              style="display: inline;"
              onsubmit="return confirm('Delete this verse? This cannot be undone.');">
            <button type="submit"
                    class="inline-flex items-center gap-1 px-3 py-1.5 rounded-lg
                           bg-red-500/20 hover:bg-red-500/30
                           border border-red-500/50 hover:border-red-500
                           text-red-300 hover:text-red-200 text-sm font-semibold
                           hover:shadow-lg hover:shadow-red-500/50
                           transition-all duration-300">
                <!-- Trash Icon -->
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
                Delete
            </button>
        </form>
        
        <!-- Date Created -->
        <span class="text-white/40 text-xs">
            {{ lyric.date_created.strftime('%b %d, %Y') }}
        </span>
    </div>
</div>

                    
                    <!-- Lyrics Text -->
                     <div class="bg-black/20 rounded-lg p-4 border-l-4 border-cyan-500">
                        <p class="text-white/90 whitespace-pre-line leading-relaxed font-mono text-sm">
                            {{ lyric.lyrics_text }}
                        </p>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <!-- No Lyrics Yet - Empty State -->
        <div class="text-center py-16">
            <!-- Music Note Icon (Empty State) -->
            <svg class="w-20 h-20 mx-auto mb-6 text-white/20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>
            </svg>
            
            <h3 class="text-xl font-semibold text-white/60 mb-2">
                No lyrics yet
            </h3>
            
            <p class="text-white/40 mb-6">
                Start adding verses to bring this track to life
            </p>
            <!-- Call to Action Button -->
            <a href="{{ url_for('add_lyrics', song_id=song.id) }}"
               class="inline-flex items-center gap-2 px-6 py-3 rounded-lg
                      bg-gradient-to-r from-purple-600 to-cyan-600
                      hover:from-purple-500 hover:to-cyan-500
                      text-white font-semibold shadow-lg shadow-purple-500/50
                      hover:shadow-purple-500/70 hover:scale-105
                      transition-all duration-300">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                          d="M12 4v16m8-8H4"/>
                </svg>
                Add Your First Verse
                </a>
        </div>
    {% endif %}
</div>

<!-- Action Buttons Section -->
<div class="flex gap-4 justify-center animate-fade-in-up">
    <!-- Delete Song Button -->
    <form method="POST" action="{{ url_for('delete_song', song_id=song.id) }}" 
          onsubmit="return confirm('Are you sure you want to delete this song? This action cannot be undone.');"
          class="inline;">
        <button type="submit"
                class="px-6 py-3 rounded-lg bg-red-500/20 hover:bg-red-500/30
                       border border-red-500/50 hover:border-red-500
                       text-red-300 hover:text-red-200 font-semibold
                       hover:shadow-lg hover:shadow-red-500/50
                       transition-all duration-300">
            üóëÔ∏è Delete Song
        </button>
    </form>

{% endblock %}